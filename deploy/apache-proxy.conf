# Apache Reverse Proxy Configuration for WorkFlow Pro
# 
# SETUP INSTRUCTIONS FOR XAMPP:
# 1. Enable required modules in httpd.conf (usually at C:\xampp\apache\conf\httpd.conf)
#    Uncomment these lines:
#    LoadModule proxy_module modules/mod_proxy.so
#    LoadModule proxy_http_module modules/mod_proxy_http.so
#
# 2. Add this configuration to httpd.conf at the end, OR
#    Include it from httpd-vhosts.conf (C:\xampp\apache\conf\extra\httpd-vhosts.conf)
#
# 3. Restart Apache

<VirtualHost *:80>
    ServerName localhost
    # Change to your domain if you have one:
    # ServerName workflowpro.yourdomain.com

    # Proxy all requests to Node.js app
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:3000/
    ProxyPassReverse / http://127.0.0.1:3000/

    # Timeout settings for SSE (Server-Sent Events) connections
    # SSE uses long-lived HTTP connections, not WebSockets
    ProxyTimeout 600
    
    # Disable buffering for SSE to work properly
    SetEnv proxy-sendchunked 1

    # Logging (adjust paths as needed)
    ErrorLog "logs/workflowpro-error.log"
    CustomLog "logs/workflowpro-access.log" common
</VirtualHost>

# Optional: HTTPS Configuration (requires SSL certificate)
# <VirtualHost *:443>
#     ServerName workflowpro.yourdomain.com
#     
#     SSLEngine on
#     SSLCertificateFile "C:/path/to/your/certificate.crt"
#     SSLCertificateKeyFile "C:/path/to/your/private.key"
#     
#     ProxyPreserveHost On
#     ProxyPass / http://127.0.0.1:3000/
#     ProxyPassReverse / http://127.0.0.1:3000/
#     
#     ProxyTimeout 600
#     SetEnv proxy-sendchunked 1
# </VirtualHost>
